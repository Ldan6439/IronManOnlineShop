<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IronManDelivery</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com "></script>
  <style>
    .fade-in-down { animation: fadeInDown 0.3s ease-out; }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="bg-gray-50">
  <!-- NotificaciÃ³n -->
  <div id="notification" class="hidden fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50 fade-in-down"></div>

  <!-- Hero Section con imagen local -->
<div class="relative bg-indigo-900 text-Black py-1">
  <!-- Imagen local desde la carpeta images -->
  <img 
    src="Images/LOGO.jpeg" 
    alt="Developed by LL89" 
    class="w-full max-h-40 object-cover opacity-90"
  />
  <div class="absolute top-0 left-0 right-0 flex flex-col items-center justify-start h-full pt-6">
    <h1 class="text-4xl md:text-5xl font-black text-white text-center" style="color: #007BFF;">
      PRODUCTOS DE 1ra CALIDA
    </h1>
  </div>
</div>

  <!-- Header -->
<header class="bg-white shadow-sm sticky top-0 z-40">
  <!-- Usamos grid con 2 filas -->
  <div class="container mx-auto px-4 py-4 grid grid-rows-2 gap-2">
    
    <!-- Fila 1: TÃ­tulo -->
    <div class="flex items-center">
      <h1 class="text-2xl font-bold text-indigo-600">IronManOnlineShop</h1>
    </div>

    <!-- Fila 2: BÃºsqueda y carrito -->
    <div class="flex items-center justify-between">
      <!-- Barra de bÃºsqueda -->
      <div class="relative flex-grow max-w-md">
        <input 
          type="text" 
          placeholder="Buscar productos..." 
          id="searchInput" 
          class="pl-10 pr-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full"
        />
        <svg 
          class="w-5 h-5 absolute left-3 top-2.5 text-gray-500" 
          fill="none" 
          stroke="currentColor" 
          viewBox="0 0 24 24"
        >
          <path 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
          ></path>
        </svg>
      </div>

      <!-- BotÃ³n del carrito -->
      <button 
        onclick="toggleCart()" 
        class="relative p-2 rounded-full hover:bg-gray-100 transition-colors ml-4"
      >
        <svg 
          class="w-6 h-6 text-gray-700" 
          fill="none" 
          stroke="currentColor" 
          viewBox="0 0 24 24"
        >
          <path 
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
          ></path>
        </svg>
        <span 
          id="cartCount" 
          class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full"
        >
          0
        </span>
      </button>
    </div>
  </div>
</header>
    
    <!-- CategorÃ­as -->
    <div class="bg-gray-100 overflow-x-auto whitespace-nowrap pb-2 sticky top-[123px] z-50">
  <div class="container mx-auto px-4">
    <button id="category-all" onclick="setActiveCategory('all')" class="category-button px-4 py-2 capitalize bg-indigo-600 text-white rounded-full">all</button>
        <button id="category-Mercado" onclick="setActiveCategory('Mercado')" class="category-button px-4 py-2 capitalize hover:bg-gray-200 text-gray-800">Mercado</button>
        <button id="category-Liquidos" onclick="setActiveCategory('Liquidos')" class="category-button px-4 py-2 capitalize hover:bg-gray-200 text-gray-800">Liquidos</button>
        <button id="category-Carnicos" onclick="setActiveCategory('Carnicos')" class="category-button px-4 py-2 capitalize whitespace-nowrap hover:bg-gray-200">Carnicos</button>
        <button id="category-Otros" onclick="setActiveCategory('Otros')" class="category-button px-4 py-2 capitalize whitespace-nowrap hover:bg-gray-200">Otros</button>
      </div>
    </div>
  </header>

  <!-- Contenido principal -->
  <main class="container mx-auto px-4 py-8">
    <h2 id="categoryTitle" class="text-3xl font-bold mb-6">Todos los productos</h2>
    
    <!-- Grid de productos -->
<div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-white mt-12 py-8 border-t">
    <div class="container mx-auto px-4 text-center text-gray-600">
      <p>Â© 2025 Gestor I94. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Carrito -->
  <div id="cartSidebar" class="fixed inset-0 z-50 hidden">
    <div class="fixed inset-0 bg-black bg-opacity-50" onclick="toggleCart()"></div>
    <div class="relative bg-white w-full max-w-md ml-auto h-full shadow-xl flex flex-col">
      <div class="p-6 border-b flex justify-between items-center">
        <h2 class="text-xl font-bold">Tu Carrito</h2>
        <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div id="cartItems" class="flex-grow overflow-y-auto p-6"></div>
      <div id="cartSummary" class="border-t p-6 hidden">
        <div class="flex justify-between mb-4">
          <span class="font-bold">Total:</span>
          <span id="totalPrice" class="font-bold">â‚±0.00</span>
        </div>
        <div class="space-y-3 mb-4">
          <input type="text" id="customerName" placeholder="Nombre completo" class="w-full px-3 py-2 border rounded" required />
          <input type="text" id="customerPhone" placeholder="TelÃ©fono (ej: 5355395477)" class="w-full px-3 py-2 border rounded" required />
        </div>
        <button onclick="sendToWhatsApp()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-full font-bold transition-colors flex items-center justify-center">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.072.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" />
        </svg>
          Enviar pedido por WhatsApp
        </button>
      </div>
    </div>
  </div>

  <!-- Script de la tienda -->
  <script>
    const products = [
      // Mercado
      { id: 1, name: "Arroz900g", category: "Mercado", price: "660.00", stock: 50, image: "Images/Mercado/Arroz900g.jpg" },
      { id: 2, name: "Cafe250g", category: "Mercado", price: "1100.00", stock: 50, image: "Images/Mercado/Cafe250g.jpg" },
      { id: 3, name: "CoffeMate", category: "Mercado", price: "1900.00", stock: 50, image: "Images/Mercado/CoffeMate.jpg" },
      { id: 4, name: "Detergente900g", category: "Mercado", price: "570.00", stock: 50, image: "Images/Mercado/Detergente900g.jpg" },
      { id: 5, name: "DetergenteLiquido", category: "Mercado", price: "350.00", stock: 50, image: "Images/Mercado/DetergenteLiquido.jpg" },
      { id: 6, name: "Harina1kg", category: "Mercado", price: "550.00", stock: 50, image: "Images/Mercado/Harina1kg.jpg" },
      { id: 7, name: "LecheConden395g", category: "Mercado", price: "460.00", stock: 50, image: "Images/Mercado/LecheConden395g.jpg" },
      { id: 8, name: "PastaTomate", category: "Mercado", price: "390.00", stock: 50, image: "Images/Mercado/PastaTomate.jpg" },
      { id: 9, name: "Spaggetti500g", category: "Mercado", price: "300.00", stock: 50, image: "Images/Mercado/Spaggetti500g.jpg" },
      { id: 10, name: "Azucar", category: "Mercado", price: "640.00", stock: 50, image: "Images/Mercado/Azucar.jpg" },
      { id: 11, name: "Jabon", category: "Mercado", price: "125.00", stock: 50, image: "Images/Mercado/Jabon.jpg" },
      { id: 12, name: "Aceite", category: "", price: "0.00", stock: 0, image: "Images/Mercado/Aceite.jpg" },
      
      // Liquidos
      { id: 13, name: "CervezaAndina", category: "Liquidos", price: "220.00", stock: 50, image: "Images/Liquidos/CervezaAndina.jpg" },
      { id: 14, name: "CervezaBeyou", category: "Liquidos", price: "220.00", stock: 50, image: "Images/Liquidos/CervezaBeyou.jpg" },
      { id: 15, name: "EnergeticoTW", category: "Liquidos", price: "250.00", stock: 50, image: "Images/Liquidos/EnergeticoTW.jpg" },
      
      // Carnicos
      { id: 16, name: "Croquetas", category: "Carnicos", price: "250.00", stock: 50, image: "Images/Carnicos/Croquetas.jpg" },
      { id: 17, name: "Perrito340g10u", category: "Carnicos", price: "380.00", stock: 25, image: "Images/Carnicos/Perrito340g10u.jpg" },
      { id: 18, name: "PolloPaq10lb", category: "Carnicos", price: "3900.00", stock: 50, image: "Images/Carnicos/PolloPaq10lb.jpg" },
      { id: 19, name: "PicadilloCocinerito", category: "", price: "0.00", stock: 0, image: "Images/Carnicos/PicadilloCocinerito.jpg" },
      
      // Otros
      { id: 20, name: "CaldoPollo10g", category: "Otros", price: "900.00", stock: 10, image: "Images/Otros/CaldoPollo10g.jpg" },
      { id: 21, name: "CondimentoTomate10g", category: "Otros", price: "80.00", stock: 100, image: "Images/Otros/CondimentoTomate10g.jpg" },

    ];

    let cart = [];
    let activeCategory = 'all';
    let searchQuery = '';
    
    function toggleCart() {
      document.getElementById('cartSidebar').classList.toggle('hidden');
    }
    
    function setActiveCategory(category) {
  // Resetear todos los botones a su estilo original
  document.querySelectorAll('.category-button').forEach(btn => {
    btn.classList.remove('bg-indigo-600', 'text-white');
    btn.classList.add('hover:bg-gray-200', 'text-gray-800');
  });

  // Aplicar estilo al botÃ³n seleccionado
  const activeButton = document.getElementById(`category-${category.replace(/[^a-zA-Z0-9]/g, '_')}`);
  if (activeButton) {
    activeButton.classList.remove('hover:bg-gray-200', 'text-gray-800');
    activeButton.classList.add('bg-indigo-600', 'text-white');
  }

  // Actualizar categorÃ­a y renderizar productos
  activeCategory = category;
  document.getElementById('categoryTitle').innerText = 
    (activeCategory === 'all') ? 'Todos los productos' : activeCategory;
  renderProducts();
  setTimeout(() => scrollToFirstProduct(category), 100);
}

function scrollToFirstProduct(category) {
  const filtered = products.filter(product => 
    (activeCategory === 'all' || product.category === activeCategory) &&
    product.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  if (filtered.length > 0) {
    const firstProduct = document.querySelector(`.product-card[data-category="${category}"]`);
    if (firstProduct) {
      const headerHeight = document.querySelector('header').offsetHeight;
      const categoryBarHeight = document.querySelector('.bg-gray-100.overflow-x-auto').offsetHeight;
      const totalOffset = headerHeight + categoryBarHeight + 90; // ðŸ“Œ Aumentado a 90px

      window.scrollTo({
        top: firstProduct.getBoundingClientRect().top + window.scrollY - totalOffset,
        behavior: 'smooth'
      });
    }
  }
}
    
    function renderProducts() {
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  
  const filtered = products.filter(product => 
    (activeCategory === 'all' || product.category === activeCategory) &&
    product.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  if (filtered.length === 0) {
    grid.innerHTML = `<div class="col-span-full text-center py-12"><p class="text-gray-500 text-xl">No se encontraron productos.</p></div>`;
    return;
  }

  filtered.forEach(product => {
    const card = document.createElement('div');
    card.className = "product-card bg-white rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col";
    card.setAttribute('data-category', product.category); // Asegura que el primer producto sea resaltado
    card.innerHTML = `
      <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover">
      <div class="p-4 flex-grow flex flex-col justify-between">
        <div>
          <h3 class="font-semibold text-lg mb-1">${product.name}</h3>
          <p class="text-gray-600 mb-2">â‚±${product.price}</p>
          <p class="text-sm text-gray-500 mb-4">${product.stock > 0 ? `Stock: ${product.stock}` : 'Agotado'}</p>
        </div>
        <button 
          onclick="addToCart(${product.id})" 
          ${product.stock <= 0 ? 'disabled' : ''} 
          class="mt-4 py-2 px-4 rounded-full font-medium transition-colors 
          ${product.stock > 0 ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}"
        >
          ${product.stock > 0 ? 'Agregar al carrito' : 'Sin stock'}
        </button>
      </div>
    `;
    grid.appendChild(card);
  });
}
    
    function addToCart(id) {
      const product = products.find(p => p.id === id);
      if (!product || product.stock <= 0) return;
      
      const existingItem = cart.find(item => item.id === id);
      if (existingItem) {
        cart = cart.map(item => 
          item.id === id ? {...item, quantity: item.quantity + 1} : item
        );
      } else {
        cart.push({...product, quantity: 1});
      }
      updateCart();
      showNotification(`AÃ±adido al carrito: ${product.name}`);
    }
    
    function updateCart() {
      const cartItems = document.getElementById('cartItems');
      cartItems.innerHTML = '';
      
      if (cart.length === 0) {
        cartItems.innerHTML = `<p class="text-red-500 text-2xl font-bold text-center py-8">Su carrito estÃ¡ vacÃ­o</p>`;
        document.getElementById('cartSummary').classList.add('hidden');
        document.getElementById('cartCount').classList.add('hidden');
        return;
      }
      
      let totalPrice = 0;
      cart.forEach(item => {
        totalPrice += parseFloat(item.price) * item.quantity;
        cartItems.innerHTML += `
          <div class="flex items-center border rounded-lg p-3 mb-2">
            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded mr-4" />
            <div class="flex-grow">
              <h4 class="font-medium">${item.name}</h4>
              <p class="text-gray-600">â‚±${item.price}</p>
            </div>
            <div class="flex items-center">
              <button onclick="updateQuantity(${item.id}, -1)" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 text-gray-700">-</button>
              <span class="mx-2 w-8 text-center">${item.quantity}</span>
              <button onclick="updateQuantity(${item.id}, 1)" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 text-gray-700">+</button>
            </div>
          </div>
        `;
      });
      
      document.getElementById('cartSummary').classList.remove('hidden');
      document.getElementById('totalPrice').innerText = `â‚±${totalPrice.toFixed(2)}`;
      document.getElementById('cartCount').classList.toggle('hidden', cart.length === 0);
      document.getElementById('cartCount').innerText = cart.reduce((sum, item) => sum + item.quantity, 0);
    }
    
    function updateQuantity(id, delta) {
  const item = cart.find(i => i.id === id);
  if (item) {
    item.quantity = Math.max(0, item.quantity + delta); // Permite que la cantidad llegue a 0
    
    if (item.quantity === 0) {
      cart = cart.filter(i => i.id !== id); // Elimina el producto si la cantidad es 0
    }
    
    updateCart(); // Actualiza el carrito en la interfaz
  }
}
    
    function sendToWhatsApp() {
      const name = document.getElementById('customerName').value;
      const phone = document.getElementById('customerPhone').value;
      
      if (!name || !phone) {
        showNotification('Completa tu nombre y telÃ©fono');
        return;
      }
      
      let message = encodeURIComponent(`IRON MAN ONLINE SHOP\nCliente: ${name}\nTelÃ©fono: ${phone}\n\nProductos:\n`);
      cart.forEach(item => {
        message += encodeURIComponent(`${item.name} - Cantidad: ${item.quantity}\n`);
      });
      message += encodeURIComponent(`\nTotal: â‚±${cart.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2)}`);
      
      window.open(` https://wa.me/5355395477?text=${message}`, '_blank');
      cart = [];
      updateCart();
      toggleCart();
      showNotification('Pedido enviado por WhatsApp');
    }
    
    function showNotification(text) {
      const notification = document.getElementById('notification');
      notification.innerText = text;
      notification.classList.remove('hidden');
      setTimeout(() => notification.classList.add('hidden'), 3000);
    }
    
    document.getElementById('searchInput').addEventListener('input', (e) => {
      searchQuery = e.target.value;
      renderProducts();
    });
    
    document.addEventListener('DOMContentLoaded', () => {
      renderProducts();
    });
  </script>
</body>
</html>
